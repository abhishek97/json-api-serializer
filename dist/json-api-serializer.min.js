!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).JSONAPISerializer=t()}(this,function(){"use strict";function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(r,n){if(!r.setImmediate){var o,i,t,a,s=1,c={},u=!1,l=r.document,e=Object.getPrototypeOf&&Object.getPrototypeOf(r);e=e&&e.setTimeout?e:r,o="[object process]"==={}.toString.call(r.process)?function(e){process.nextTick(function(){p(e)})}:function(){if(r.postMessage&&!r.importScripts){var e=!0,t=r.onmessage;return r.onmessage=function(){e=!1},r.postMessage("","*"),r.onmessage=t,e}}()?(a="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",h,!1):r.attachEvent("onmessage",h),function(e){r.postMessage(a+e,"*")}):r.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(e){t.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,function(e){var t=l.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):function(e){setTimeout(p,0,e)},e.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return c[s]=n,o(s),s++},e.clearImmediate=f}function f(e){delete c[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{f(e),u=!1}}}}function h(e){e.source===r&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))}}("undefined"==typeof self?e:self);var t="Expected a function",o="__lodash_hash_undefined__",r=1/0,i=9007199254740991,a="[object Function]",s="[object GeneratorFunction]",c="[object Symbol]",b=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,v=/^\w*$/,u=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,p=/^\[object .+?Constructor\]$/,y=/^(?:0|[1-9]\d*)$/,m="object"==d(e)&&e&&e.Object===Object&&e,w="object"==("undefined"==typeof self?"undefined":d(self))&&self&&self.Object===Object&&self,g=m||w||Function("return this")();var j,k=Array.prototype,_=Function.prototype,O=Object.prototype,E=g["__core-js_shared__"],A=(j=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",z=_.toString,C=O.hasOwnProperty,L=O.toString,S=RegExp("^"+z.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=g.Symbol,R=k.splice,N=J(g,"Map"),x=J(Object,"create"),D=M?M.prototype:void 0,P=D?D.toString:void 0;function I(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Z(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function K(e,t){for(var r=e.length;r--;)if(H(e[r][0],t))return r;return-1}function T(e){return!(!W(e)||function(e){return!!A&&A in e}(e))&&(function(e){var t=W(e)?L.call(e):"";return t==a||t==s}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?S:p).test(function(e){if(null!=e){try{return z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function V(e,t,r,n){if(!W(e))return e;for(var o,i,a,s,c=-1,u=(t=function(e,t){if(Q(e))return!1;var r=d(e);if("number"==r||"symbol"==r||"boolean"==r||null==e||X(e))return!0;return v.test(e)||!b.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return Q(e)?e:B(e)}(t)).length,l=u-1,f=e;null!=f&&++c<u;){var p=G(t[c]),h=r;if(c!=l){var y=f[p];void 0===(h=n?n(y,p,f):void 0)&&(h=W(y)?y:q(t[c+1])?[]:{})}a=h,void 0,s=(o=f)[i=p],C.call(o,i)&&H(s,a)&&(void 0!==a||i in o)||(o[i]=a),f=f[p]}return e}function F(e,t){var r=e.__data__;return function(e){var t=d(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function J(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return T(r)?r:void 0}function q(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||y.test(e))&&-1<e&&e%1==0&&e<t}I.prototype.clear=function(){this.__data__=x?x(null):{}},I.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},I.prototype.get=function(e){var t=this.__data__;if(x){var r=t[e];return r===o?void 0:r}return C.call(t,e)?t[e]:void 0},I.prototype.has=function(e){var t=this.__data__;return x?void 0!==t[e]:C.call(t,e)},I.prototype.set=function(e,t){return this.__data__[e]=x&&void 0===t?o:t,this},Z.prototype.clear=function(){this.__data__=[]},Z.prototype.delete=function(e){var t=this.__data__,r=K(t,e);return!(r<0)&&(r==t.length-1?t.pop():R.call(t,r,1),!0)},Z.prototype.get=function(e){var t=this.__data__,r=K(t,e);return r<0?void 0:t[r][1]},Z.prototype.has=function(e){return-1<K(this.__data__,e)},Z.prototype.set=function(e,t){var r=this.__data__,n=K(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},$.prototype.clear=function(){this.__data__={hash:new I,map:new(N||Z),string:new I}},$.prototype.delete=function(e){return F(this,e).delete(e)},$.prototype.get=function(e){return F(this,e).get(e)},$.prototype.has=function(e){return F(this,e).has(e)},$.prototype.set=function(e,t){return F(this,e).set(e,t),this};var B=U(function(e){e=function(e){return null==e?"":function(e){if("string"==typeof e)return e;if(X(e))return P?P.call(e):"";var t=e+"";return"0"==t&&1/e==-r?"-0":t}(e)}(e);var o=[];return u.test(e)&&o.push(""),e.replace(l,function(e,t,r,n){o.push(r?n.replace(f,"$1"):t||e)}),o});function G(e){if("string"==typeof e||X(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}function U(o,i){if("function"!=typeof o||i&&"function"!=typeof i)throw new TypeError(t);function a(){var e=arguments,t=i?i.apply(this,e):e[0],r=a.cache;if(r.has(t))return r.get(t);var n=o.apply(this,e);return a.cache=r.set(t,n),n}return a.cache=new(U.Cache||$),a}function H(e,t){return e===t||e!=e&&t!=t}U.Cache=$;var Q=Array.isArray;function W(e){var t=d(e);return!!e&&("object"==t||"function"==t)}function X(e){return"symbol"==d(e)||function(e){return!!e&&"object"==d(e)}(e)&&L.call(e)==c}var Y={get:function(e,t,r){return String.prototype.split.call(t,/[,[\].]+?/).filter(Boolean).reduce(function(e,t){return Object.hasOwnProperty.call(e,t)?e[t]:r},e)},set:function(e,t,r){return null==e?e:V(e,t,r)},pick:function(r,e){return e.reduce(function(e,t){return t in r&&(e[t]=r[t]),e},{})},isEmpty:function(e){return null==e||!(Object.keys(e)||e).length},omit:function(r,t){return Object.keys(r).filter(function(e){return!t.includes(e)}).reduce(function(e,t){return e[t]=r[t],e},{})},isPlainObject:function(e){return!!e&&"object"===d(e)&&e.constructor===Object},transform:function(r,n,e){return Object.keys(r).reduce(function(e,t){return n(e,r[t],t,r)},e)},toKebabCase:function(e){return e&&e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map(function(e){return e.toLowerCase()}).join("-")},toSnakeCase:function(e){return e&&e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map(function(e){return e.toLowerCase()}).join("_")},toCamelCase:function(e){var t=e&&e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g).map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}).join("");return t.slice(0,1).toLowerCase()+t.slice(1)}};var ee=Y.pick,te=Y.isEmpty,re=Y.omit,ne=Y.isPlainObject,oe=Y.transform,ie=Y.get,ae=Y.set,se=Y.toCamelCase,ce=Y.toKebabCase,ue=Y.toSnakeCase,le=function(e){if(e=Object.assign({id:"id",blacklist:[],whitelist:[],links:{},relationships:{},topLevelLinks:{},topLevelMeta:{},meta:{},blacklistOnDeserialize:[],whitelistOnDeserialize:[],jsonapiObject:!0},e),!Array.isArray(e.blacklist))throw new Error("option 'blacklist' must be an array");if(!Array.isArray(e.whitelist))throw new Error("option 'whitelist' must be an array");if("object"!==d(e.links)&&"function"!=typeof e.links)throw new Error("option 'links' must be an object or a function");if(!Array.isArray(e.blacklistOnDeserialize))throw new Error("option 'blacklistOnDeserialize' must be an array");if(!Array.isArray(e.whitelistOnDeserialize))throw new Error("option 'whitelistOnDeserialize' must be an array");if(e.topLevelLinks&&"object"!==d(e.topLevelLinks)&&"function"!=typeof e.topLevelLinks)throw new Error("option 'topLevelLinks' must be an object or a function");if(e.topLevelMeta&&"object"!==d(e.topLevelMeta)&&"function"!=typeof e.topLevelMeta)throw new Error("option 'topLevelMeta' must be an object or a function");if(e.meta&&"object"!==d(e.meta)&&"function"!=typeof e.meta)throw new Error("option 'meta' must be an object or a function");if("boolean"!=typeof e.jsonapiObject)throw new Error("option 'jsonapiObject' must a boolean");if(e.convertCase&&!["kebab-case","snake_case","camelCase"].includes(e.convertCase))throw new Error("option 'convertCase' must be one of 'kebab-case', 'snake_case', 'camelCase'");if(e.unconvertCase&&!["kebab-case","snake_case","camelCase"].includes(e.unconvertCase))throw new Error("option 'unconvertCase' must be one of 'kebab-case', 'snake_case', 'camelCase'");var t=e.relationships;return Object.keys(t).forEach(function(e){if(t[e]=Object.assign({schema:"default",links:{},meta:{}},t[e]),!t[e].type)throw new Error("option 'type' for relationship '".concat(e,"' is required"));if("string"!=typeof t[e].type&&"function"!=typeof t[e].type)throw new Error("option 'type' for relationship '".concat(e,"' must be a string or a function"));if(t[e].alternativeKey&&"string"!=typeof t[e].alternativeKey)throw new Error("option 'alternativeKey' for relationship '".concat(e,"' must be a string"));if(t[e].schema&&"string"!=typeof t[e].schema)throw new Error("option 'schema' for relationship '".concat(e,"' must be a string"));if("object"!==d(t[e].links)&&"function"!=typeof t[e].links)throw new Error("option 'links' for relationship '".concat(e,"' must be an object or a function"));if("object"!==d(t[e].meta)&&"function"!=typeof t[e].meta)throw new Error("option 'meta' for relationship '".concat(e,"' must be an object or a function"));if(t[e].deserialize&&"function"!=typeof t[e].deserialize)throw new Error("option 'deserialize' for relationship '".concat(e,"' must be a function"))}),e},fe=function(e){if(!(e=Object.assign({topLevelLinks:{},topLevelMeta:{},jsonapiObject:!0},e)).type)throw new Error("option 'type' is required");if("string"!=typeof e.type&&"function"!=typeof e.type)throw new Error("option 'type' must be a string or a function");if(e.topLevelLinks&&"object"!==d(e.topLevelLinks)&&"function"!=typeof e.topLevelLinks)throw new Error("option 'topLevelLinks' must be an object or a function");if(e.topLevelMeta&&"object"!==d(e.topLevelMeta)&&"function"!=typeof e.topLevelMeta)throw new Error("option 'topLevelMeta' must be an object or a function");if(e.meta&&"object"!==d(e.meta)&&"function"!=typeof e.meta)throw new Error("option 'meta' must be an object or a function");if("boolean"!=typeof e.jsonapiObject)throw new Error("option 'jsonapiObject' must a boolean");return e},pe=function(e){if("object"!==d(e))throw new Error("error must be an object");var t=e.id,r=e.links,n=e.status,o=e.code,i=e.title,a=e.detail,s=e.source,c=e.meta,u={};return t&&(u.id=t.toString()),r&&(u.links=function(t){if("object"!==d(t))throw new Error("error 'link' property must be an object");return Object.keys(t).forEach(function(e){if("object"!==d(t[e])&&"string"!=typeof t[e])throw new Error("error 'links.".concat(e,"' must be a string or an object"));if("object"===d(t[e])){if(t[e].href&&"string"!=typeof t[e].href)throw new Error("'links.".concat(e,".href' property must be a string"));if(t[e].meta&&"object"!==d(t[e].meta))throw new Error("'links.".concat(e,".meta' property must be an object"))}}),r}(r)),n&&(u.status=n.toString()),o&&(u.code=o.toString()),i&&(u.title=i.toString()),a&&(u.detail=a.toString()),s&&(u.source=function(e){if("object"!==d(e))throw new Error("error 'source' property must be an object");if(e.pointer&&"string"!=typeof e.pointer)throw new Error("error 'source.pointer' property must be a string");if(e.parameter&&"string"!=typeof e.parameter)throw new Error("error 'source.parameter' property must be a string");return s}(s)),c&&(u.meta=c),u};return function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.opts=e||{},this.schemas={}}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(t,[{key:"register",value:function(e,t,r){"object"===d(t)&&(r=t,t="default"),t=t||"default",r=Object.assign({},this.opts,r),this.schemas[e]=this.schemas[e]||{},this.schemas[e][t]=le(r)}},{key:"serialize",value:function(e,t,r,n){3===arguments.length&&"object"===d(r)&&(n=r,r="default"),r=r||"default",n=n||{};var o,i=new Map,a="object"===d(e);if(a)o=fe(e);else{if(!this.schemas[e])throw new Error("No type registered for ".concat(e));if(r&&!this.schemas[e][r])throw new Error("No schema ".concat(r," registered for ").concat(e));o=this.schemas[e][r]}return{jsonapi:o.jsonapiObject?{version:"1.0"}:void 0,meta:this.processOptionsValues(t,n,o.topLevelMeta,"extraData"),links:this.processOptionsValues(t,n,o.topLevelLinks,"extraData"),data:a?this.serializeMixedResource(o,t,i,n):this.serializeResource(e,t,o,i,n),included:i.size?h(i.values()):void 0}}},{key:"serializeAsync",value:function(o,t,e,i){var r=this;3===arguments.length&&"object"===d(e)&&(i=e,e="default"),e=e||"default",i=i||{};var a,s=new Map,n=Array.isArray(t),c="object"===d(o),u=n?t:[t],l=[],f=this,p=0;if(c)a=fe(o);else{if(!this.schemas[o])throw new Error("No type registered for ".concat(o));if(e&&!this.schemas[o][e])throw new Error("No schema ".concat(e," registered for ").concat(o));a=this.schemas[o][e]}return new Promise(function(r,n){!function t(){setImmediate(function(){if(p>=u.length)return r(l);try{var e=c?f.serializeMixedResource(o,u[p],s,i):f.serializeResource(o,u[p],a,s,i);return null!==e&&l.push(e),p+=1,t()}catch(e){return n(e)}})}()}).then(function(e){return{jsonapi:a.jsonapiObject?{version:"1.0"}:void 0,meta:r.processOptionsValues(t,i,a.topLevelMeta,"extraData"),links:r.processOptionsValues(t,i,a.topLevelLinks,"extraData"),data:n?e:e[0]||null,included:s.size?h(s.values()):void 0}})}},{key:"deserialize",value:function(t,r,n){var o=this;if(n=n||"default","object"===d(t))t=fe(t);else{if(!this.schemas[t])throw new Error("No type registered for ".concat(t));if(n&&!this.schemas[t][n])throw new Error("No schema ".concat(n," registered for ").concat(t))}var e={};return r.data&&(e=Array.isArray(r.data)?r.data.map(function(e){return o.deserializeResource(t,e,n,r.included)}):this.deserializeResource(t,r.data,n,r.included)),e}},{key:"deserializeAsync",value:function(o,i,a){if(a=a||"default","object"===d(o))o=fe(o);else{if(!this.schemas[o])throw new Error("No type registered for ".concat(o));if(a&&!this.schemas[o][a])throw new Error("No schema ".concat(a," registered for ").concat(o))}var s=Array.isArray(i.data),c=0,u=s?i.data:[i.data],l=[],f=this;return new Promise(function(r,n){!function t(){setImmediate(function(){if(c>=u.length)return r(s?l:l[0]);try{var e=f.deserializeResource(o,u[c],a,i.included);return l.push(e),c+=1,t()}catch(e){return n(e)}})}()})}},{key:"serializeError",value:function(e){function t(e){var t;if(e instanceof Error){var r=e.status||e.statusCode;t={status:r&&r.toString(),code:e.code,detail:e.message}}else t=pe(e);return t}return{errors:Array.isArray(e)?e.map(function(e){return t(e)}):[t(e)]}}},{key:"deserializeResource",value:function(e,o,t,i){var a=this;if("object"===d(e)){if(!(e="function"==typeof e.type?e.type(o):ie(o,e.type)))throw new Error("No type can be resolved from data: ".concat(JSON.stringify(o)));if(!this.schemas[e])throw new Error("No type registered for ".concat(e));t="default"}var s=this.schemas[e][t],c={};return c[s.id]=o.id||void 0,o.attributes&&s.whitelistOnDeserialize.length&&(o.attributes=ee(o.attributes,s.whitelistOnDeserialize)),o.attributes&&s.blacklistOnDeserialize.length&&(o.attributes=re(o.attributes,s.blacklistOnDeserialize)),Object.assign(c,o.attributes),o.relationships&&Object.keys(o.relationships).forEach(function(t){var e=o.relationships[t],r=s.unconvertCase?a._convertCase(t,s.unconvertCase):t;s.relationships[r]&&s.relationships[r].alternativeKey&&(r=s.relationships[r].alternativeKey);function n(e){return s.relationships[r]&&s.relationships[t].deserialize?s.relationships[t].deserialize(e):e.id}void 0!==e.data&&(Array.isArray(e.data)?ae(c,r,e.data.map(function(e){return i?a.deserializeIncluded(e.type,e.id,s.relationships[t],i):n(e)})):null===e.data?ae(c,r,null):ae(c,r,i?a.deserializeIncluded(e.data.type,e.data.id,s.relationships[t],i):n(e.data)))}),s.unconvertCase&&(c=this._convertCase(c,s.unconvertCase)),o.links&&(c.links=o.links),o.meta&&(c.meta=o.meta),c}},{key:"deserializeIncluded",value:function(t,r,e,n){var o=n.find(function(e){return e.type===t&&e.id===r});return o?this.deserializeResource(t,o,e.schema,n):r}},{key:"serializeResource",value:function(t,e,r,n,o){var i=this;return te(e)?Array.isArray(e)?e:null:Array.isArray(e)?e.map(function(e){return i.serializeResource(t,e,r,n,o)}):{type:t,id:e[r.id]?e[r.id].toString():void 0,attributes:this.serializeAttributes(e,r),relationships:this.serializeRelationships(e,r,n,o),meta:this.processOptionsValues(e,o,r.meta),links:this.processOptionsValues(e,o,r.links)}}},{key:"serializeMixedResource",value:function(t,e,r,n){var o=this;if(te(e))return Array.isArray(e)?e:null;if(Array.isArray(e))return e.map(function(e){return o.serializeMixedResource(t,e,r,n)});var i="function"==typeof t.type?t.type(e):ie(e,t.type);if(!i)throw new Error("No type can be resolved from data: ".concat(JSON.stringify(e)));if(!this.schemas[i])throw new Error("No type registered for ".concat(i));return this.serializeResource(i,e,this.schemas[i].default,r,n)}},{key:"serializeAttributes",value:function(e,r){r.whitelist&&r.whitelist.length&&(e=ee(e,r.whitelist));var n=[];Object.keys(r.relationships).forEach(function(e){var t=r.relationships[e];t.alternativeKey&&n.push(t.alternativeKey)});var t=re(e,[r.id].concat(h(Object.keys(r.relationships)),n,h(r.blacklist)));return r.convertCase&&(t=this._convertCase(t,r.convertCase)),Object.keys(t).length?t:void 0}},{key:"serializeRelationships",value:function(o,i,a,s){var c=this,u={};return Object.keys(i.relationships).forEach(function(e){var t=i.relationships[e],r=e;!o[e]&&t.alternativeKey&&(r=t.alternativeKey);var n={links:c.processOptionsValues(o,s,t.links),meta:c.processOptionsValues(o,s,t.meta),data:c.serializeRelationship(t.type,t.schema,ie(o,r),a,o,s)};void 0===n.data&&void 0===n.links&&void 0===n.meta&&(n={data:null}),e=i.convertCase?c._convertCase(e,i.convertCase):e,u[e]=n}),Object.keys(u).length?u:void 0}},{key:"serializeRelationship",value:function(t,e,r,n,o,i){var a=this;n=n||new Map;var s=e||"default";if(null==r)return r;if("object"===d(r)&&te(r))return Array.isArray(r)?[]:null;if(Array.isArray(r))return r.map(function(e){return a.serializeRelationship(t,s,e,n,o,i)});var c="function"==typeof t?t(r,o):t;if(!c)throw new Error("No type can be resolved from relationship's data: ".concat(JSON.stringify(r)));if(!this.schemas[c])throw new Error('No type registered for "'.concat(c,'"'));if(!this.schemas[c][s])throw new Error('No schema "'.concat(s,'" registered for type "').concat(c,'"'));var u=this.schemas[c][s],l={type:c};return ne(r)?(l.id=r[u.id].toString(),n.set("".concat(c,"-").concat(l.id),this.serializeResource(c,r,u,n,i))):l.id=r.toString(),l}},{key:"processOptionsValues",value:function(r,n,o,i){var a={};return o&&"function"==typeof o?a="extraData"===i&&1===o.length?o(n):o(r,n):Object.keys(o).forEach(function(e){var t={};t=o[e]&&"function"==typeof o[e]?"extraData"===i&&1===o[e].length?o[e](n):o[e](r,n):o[e],Object.assign(a,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},e,t))}),a&&Object.keys(a).length?a:void 0}},{key:"_convertCase",value:function(e,n){var t,o=this;if("object"===d(e))t=oe(e,function(e,t,r){return"object"===d(t)?e[o._convertCase(r,n)]=o._convertCase(t,n):e[o._convertCase(r,n)]=t,e},{});else switch(n){case"snake_case":t=ue(e);break;case"kebab-case":t=ce(e);break;case"camelCase":t=se(e)}return t}}]),t}()});
//# sourceMappingURL=json-api-serializer.min.js.map
